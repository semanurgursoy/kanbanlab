<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../static/css/home.css" th:href="@{/css/home.css}" rel="stylesheet">
    <link href="../static/css/navbar.css" th:href="@{/css/navbar.css}" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Caveat' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Home</title>
</head>
<body>

<div class="navbar">
    <ul>
        <li><a href="#home">KanbanLab</a></li>
        <li style="float:right;" class="dropdown">
            <button class="dropbtn">Account<i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content">
                <a th:href="@{/login}" class="active" href="#">Logout</a>
                <a th:href="@{/settings}" class="active" href="#">Settings</a>
            </div>
        </li>
        <li style="float:right;"><a th:href="@{/login}">New Project</a></li>
    </ul>
</div>

<!--
<div sec:authorize="isAuthenticated()">
  This content is only shown to authenticated users.
  <p sec:authentication="principal.username"></p>
</div>
Logged user: <span sec:authentication="name">Bob</span><br>
<span sec:authentication="principal.username">User</span><br>
Roles: <span sec:authentication="principal.authorities">[ROLE_USER, ROLE_ADMIN]</span>
-->
<!-- <h1>User After Login: Home Page</h1> -->
<!-- <h1>Email : [[${email}]]</h1> -->
<!-- Email <p th:text="${email}"></p> -->


<div class="row">
    <div class="column side left">
        <div>
            <a th:href="@{/addCard}">add card</a>
            <a th:href="@{/addCard}">update project</a>
            <i class='fas fa-caret-left' style='font-size:32px'></i>
        </div>
    </div>
        <div class="column middle">

        <div class="row-list">
            <div class="card-container">
                <div class="card-header">to do</div>
                <div class="card" th:each="card : ${cards[0]}">
                    <div data-name="card">
                        <p th:text="${card.name}"><span>card name</span></p>
                        <div class="calendar-cont">
                            <i class="fa fa-calendar" style="font-size:20px; margin-right: 10px;"></i>
                            <p th:text="${card.endDate}"><span>end date</span></p>
                        </div>

                        <div class="task-users">
                            <th:block th:each="user : ${card.cardUsers}">
                                <div class="user">
                                    <tr>
                                        <div class="scrollbar">
                                            <div style="text-align:center;">
                                                <i class="fa fa-user-circle" style="font-size:24px;"></i>
                                                <td th:text="${user.name}"></td>
                                            </div>
                                        </div>
                                    </tr>
                                </div>
                            </th:block>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-container">
                <div class="card-header">doing</div>
                <div class="card" th:each="card : ${cards[1]}">
                    <div data-name="card">
                        <p th:text="${card.name}"><span>card name</span></p>
                        <div class="calendar-cont">
                            <i class="fa fa-calendar" style="font-size:20px; margin-right: 10px;"></i>
                            <p th:text="${card.endDate}"><span>end date</span></p>
                        </div>

                        <div class="task-users">
                            <th:block th:each="user : ${card.cardUsers}">
                                <div class="user">
                                    <tr>
                                        <div class="scrollbar">
                                            <div style="text-align:center;">
                                                <i class="fa fa-user-circle" style="font-size:24px;"></i>
                                                <td th:text="${user.name}"></td>
                                            </div>
                                        </div>
                                    </tr>
                                </div>
                            </th:block>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-container">
                <div class="card-header">done</div>
                <div class="card" th:each="card : ${cards[2]}" data-name=th:text="${card.id}">
                    <div>
                        <div class="card-name"><p th:text="${card.name}"><span>card name</span></p></div>
                        <div class="check"><i class="fa fa-check-circle" style="font-size:24px"></i></div>
                        <div class="calendar-cont">
                            <i class="fa fa-calendar" style="font-size:20px; margin-right: 10px;"></i>
                            <p th:text="${card.endDate}"><span>end date</span></p>
                        </div>

                        <div class="task-users">
                            <th:block th:each="user : ${card.cardUsers}">
                                <div class="user">
                                    <tr>
                                        <div class="scrollbar">
                                            <div style="text-align:center;">
                                                <i class="fa fa-user-circle" style="font-size:24px;"></i>
                                                <td th:text="${user.name}"></td>
                                            </div>
                                        </div>
                                    </tr>
                                </div>
                            </th:block>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="column side right">
        <div>
            <i class='fas fa-caret-right' style='font-size:32px'></i>
        </div>
    </div>
</div>

<div class="footer">
    <p>Footer</p>
</div>


<div class="cards-preview" th:each="card : ${allCards}">

    <div class="preview" data-target=th:text="${card.id}">
        <i class="fa fa-close" style="font-size: 36px;"></i>
        <h3 th:text="${card.project.name}"></h3>
        <h3 th:text="${card.name}"></h3>
        <!-- loading eklenebilir -->
        <p th:text="${card.desc}"></p>
        <div class="calendar-cont">
            <i class="fa fa-calendar" style="font-size:20px; margin-right: 10px;"></i>
            <p th:text="${card.createDate}"><span>create date</span></p>
            <p>/</p>
            <p th:text="${card.endDate}"><span>end date</span></p>
        </div>
        <div class="leader">
            <p th:text="${card.leader.name}"></p>
            <pre><p> </p></pre>
            <p th:text="${card.leader.surname}"></p>
        </div>
        <div class="task-users">
            <th:block th:each="user : ${card.cardUsers}">
                <div class="user">
                    <tr>
                        <div class="scrollbar">
                            <div style="text-align:center;">
                                <i class="fa fa-user-circle" style="font-size:24px;"></i>
                                <td th:text="${user.name}"></td>
                            </div>
                        </div>
                    </tr>
                </div>
            </th:block>
        </div>
        <div class="update">
            <i class="fa fa-gear" style="font-size:24px"></i>
        </div>
        <div class="update">
            <i class="fa fa-times-circle" style="font-size:24px"></i>
        </div>
    </div>

</div>

<script type="text/javascript" th:src="@{/js/preview.js}"></script>
<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
<!--<script type="text/javascript" th:src="@{/js/scroll.js}"></script>-->

</body>
</html>